# Water Bot

A Telegram bot that provides information about river water levels in Serbia.
All code generated by [Claude](https://claude.ai).

## Features

- List all available rivers
- Get detailed information about a specific river including:
  - Water level in cm
  - Water level change in cm
  - Discharge in m³/s
  - Water temperature in °C
  - Water level tendency (rising, falling, stable)

## System Components

This project consists of two main components:
- **Water Bot**: Telegram bot that responds to user commands and provides river information
- **Water Scraper**: Background service that periodically scrapes and updates river data hourly

## Commands

- `/start` - Start the bot
- `/help` - Show help information
- `/rivers` - Show the list of all available rivers
- `/river [name]` - Show information for a specific river

## Deployment Instructions

### Prerequisites

- Go 1.24 or higher
- A Telegram Bot Token (obtained from [@BotFather](https://t.me/BotFather))

### Local Deployment

1. Clone the repository:
   ```bash
   git clone https://github.com/abelzeko/water-bot.git
   cd water-bot
   ```

2. Install dependencies:
   ```bash
   go mod download
   ```

3. Set the Telegram Bot Token as an environment variable:
   ```bash
   export TELEGRAM_BOT_TOKEN=your_bot_token_here
   ```

4. Run the components:
   ```bash
   # Run the bot
   go run cmd/bot/bot.go
   
   # In a separate terminal, run the scraper
   go run cmd/scrapper/scrapper.go
   ```

### Deployment with Docker

The easiest way to deploy the application is using Docker and docker-compose:

1. Build the Docker image:
   ```bash
   docker build -t water-bot:latest .
   ```

2. Create a `.env` file with your Telegram Bot Token:
   ```
   TELEGRAM_BOT_TOKEN=your_bot_token_here
   ```

3. Start both services using docker-compose:
   ```bash
   docker-compose up -d
   ```

This will start both the water-bot and water-scraper services, with the scraper automatically refreshing river data every hour.

### Data Storage

The application stores river data in an SQLite database located in the `data/riverdata.db` file. When using Docker, this data is persisted through a volume mount.

## Troubleshooting

- Check logs if the bot is not responding:
  ```bash
  docker logs water-bot
  docker logs water-scraper
  ```
- Verify that the Telegram Bot Token is set correctly
- Ensure the bot has internet access to fetch data from the water monitoring website

## Security Considerations

For security recommendations, refer to [Security Recommendations](./docs/security-recommendations.md).

## Digital Ocean Deployment

For detailed instructions on Digital Ocean deployment, see [Digital Ocean Setup Guide](./docs/digital-ocean-setup.md).